import { useState, useEffect } from "react";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";\nimport { Button } from "@/components/ui/button";\nimport { AlertCircle, TrendingUp, Wallet, MessageSquare, Car, Bell, ArrowRight } from "lucide-react";\nimport { useLocation } from \"wouter\";\nimport { trpc } from \"@/lib/trpc\";\nimport { toast } from \"sonner\";\n\ninterface DashboardStats {\n  totalAlerts: number;\n  alertsThisMonth: number;\n  totalCredits: number;\n  creditsUsed: number;\n  vehicleCount: number;\n  unreadMessages: number;\n  recentAlerts: Array<{\n    id: number;\n    plate: string;\n    type: string;\n    message: string;\n    date: string;\n  }>;\n}\n\nexport default function EnhancedDashboard() {\n  const [, setLocation] = useLocation();\n  const [stats, setStats] = useState<DashboardStats>({\n    totalAlerts: 0,\n    alertsThisMonth: 0,\n    totalCredits: 0,\n    creditsUsed: 0,\n    vehicleCount: 0,\n    unreadMessages: 0,\n    recentAlerts: [],\n  });\n  const [loading, setLoading] = useState(true);\n\n  // Simular carregamento de dados\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setStats({\n        totalAlerts: 24,\n        alertsThisMonth: 8,\n        totalCredits: 150,\n        creditsUsed: 45,\n        vehicleCount: 2,\n        unreadMessages: 3,\n        recentAlerts: [\n          {\n            id: 1,\n            plate: \"ABC-1234\",\n            type: \"Faróis Acesos\",\n            message: \"Faróis do seu veículo estão acesos\",\n            date: \"Hoje às 14:30\",\n          },\n          {\n            id: 2,\n            plate: \"XYZ-5678\",\n            type: \"Porta Aberta\",\n            message: \"Porta do veículo está aberta\",\n            date: \"Ontem às 10:15\",\n          },\n          {\n            id: 3,\n            plate: \"ABC-1234\",\n            type: \"Pneu Furado\",\n            message: \"Um dos pneus parece estar furado\",\n            date: \"2 dias atrás\",\n          },\n        ],\n      });\n      setLoading(false);\n    }, 500);\n\n    return () => clearTimeout(timer);\n  }, []);\n\n  const creditPercentage = (stats.creditsUsed / stats.totalCredits) * 100;\n  const alertPercentage = (stats.alertsThisMonth / 30) * 100;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-4xl font-bold text-gray-900\">Dashboard</h1>\n          <p className=\"text-gray-600 mt-2\">Bem-vindo de volta! Aqui está um resumo da sua atividade.</p>\n        </div>\n\n        {/* Stats Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\">\n          {/* Total Alerts */}\n          <Card className=\"shadow-lg hover:shadow-xl transition\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"flex items-center justify-between\">\n                <span>Alertas Totais</span>\n                <AlertCircle className=\"w-5 h-5 text-red-500\" />\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-3xl font-bold text-gray-900\">{stats.totalAlerts}</p>\n              <p className=\"text-sm text-gray-600 mt-2\">{stats.alertsThisMonth} este mês</p>\n              <div className=\"mt-4 bg-gray-200 rounded-full h-2\">\n                <div\n                  className=\"bg-red-500 h-2 rounded-full transition-all\"\n                  style={{ width: `${Math.min(alertPercentage, 100)}%` }}\n                />\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Credits */}\n          <Card className=\"shadow-lg hover:shadow-xl transition\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"flex items-center justify-between\">\n                <span>Créditos</span>\n                <Wallet className=\"w-5 h-5 text-green-500\" />\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-3xl font-bold text-gray-900\">{stats.totalCredits}</p>\n              <p className=\"text-sm text-gray-600 mt-2\">{stats.creditsUsed} usados</p>\n              <div className=\"mt-4 bg-gray-200 rounded-full h-2\">\n                <div\n                  className=\"bg-green-500 h-2 rounded-full transition-all\"\n                  style={{ width: `${creditPercentage}%` }}\n                />\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Vehicles */}\n          <Card className=\"shadow-lg hover:shadow-xl transition\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"flex items-center justify-between\">\n                <span>Veículos</span>\n                <Car className=\"w-5 h-5 text-blue-500\" />\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-3xl font-bold text-gray-900\">{stats.vehicleCount}</p>\n              <p className=\"text-sm text-gray-600 mt-2\">Veículos cadastrados</p>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setLocation(\"/vehicles\")}\n                className=\"mt-4 w-full\"\n              >\n                Gerenciar Veículos\n                <ArrowRight className=\"w-4 h-4 ml-2\" />\n              </Button>\n            </CardContent>\n          </Card>\n\n          {/* Unread Messages */}\n          <Card className=\"shadow-lg hover:shadow-xl transition\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"flex items-center justify-between\">\n                <span>Mensagens</span>\n                <MessageSquare className=\"w-5 h-5 text-purple-500\" />\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-3xl font-bold text-gray-900\">{stats.unreadMessages}</p>\n              <p className=\"text-sm text-gray-600 mt-2\">Não lidas</p>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setLocation(\"/received-messages\")}\n                className=\"mt-4 w-full\"\n              >\n                Ver Mensagens\n                <ArrowRight className=\"w-4 h-4 ml-2\" />\n              </Button>\n            </CardContent>\n          </Card>\n\n          {/* Quick Actions */}\n          <Card className=\"shadow-lg hover:shadow-xl transition\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"flex items-center justify-between\">\n                <span>Ações Rápidas</span>\n                <Bell className=\"w-5 h-5 text-yellow-500\" />\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setLocation(\"/send-alert\")}\n                className=\"w-full justify-start\"\n              >\n                <AlertCircle className=\"w-4 h-4 mr-2\" />\n                Enviar Alerta\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setLocation(\"/buy-credits\")}\n                className=\"w-full justify-start\"\n              >\n                <Wallet className=\"w-4 h-4 mr-2\" />\n                Comprar Créditos\n              </Button>\n            </CardContent>\n          </Card>\n\n          {/* Trending */}\n          <Card className=\"shadow-lg hover:shadow-xl transition\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"flex items-center justify-between\">\n                <span>Tendências</span>\n                <TrendingUp className=\"w-5 h-5 text-indigo-500\" />\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                <div>\n                  <p className=\"text-sm text-gray-600\">Alertas esta semana</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">↑ 3</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-600\">Créditos gastos</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">↓ 15</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Recent Alerts */}\n        <Card className=\"shadow-lg\">\n          <CardHeader>\n            <CardTitle>Alertas Recentes</CardTitle>\n            <CardDescription>\n              Últimos alertas recebidos sobre seus veículos\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            {loading ? (\n              <div className=\"space-y-3\">\n                {[1, 2, 3].map((i) => (\n                  <div key={i} className=\"h-20 bg-gray-200 rounded-lg animate-pulse\" />\n                ))}\n              </div>\n            ) : stats.recentAlerts.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <AlertCircle className=\"w-12 h-12 text-gray-300 mx-auto mb-3\" />\n                <p className=\"text-gray-600\">Nenhum alerta recente</p>\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                {stats.recentAlerts.map((alert) => (\n                  <div\n                    key={alert.id}\n                    className=\"flex items-start justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition\"\n                  >\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <span className=\"font-semibold text-gray-900\">{alert.plate}</span>\n                        <span className=\"px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full\">\n                          {alert.type}\n                        </span>\n                      </div>\n                      <p className=\"text-sm text-gray-600\">{alert.message}</p>\n                      <p className=\"text-xs text-gray-500 mt-1\">{alert.date}</p>\n                    </div>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => setLocation(\"/received-messages\")}\n                    >\n                      Ver Detalhes\n                    </Button>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n
